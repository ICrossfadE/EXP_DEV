Привіт усім!
Минулого тижня я працював над: 
- Оновленням моделей даних, які я отримую та відправляю в Firestore
- Додаванням функції видалення гаманця
- Оптимізацією зберігання даних у Firestore

 Додавання функції видалення гаманця
  - Нещодавно я реалізував функцію для видалення гаманця з Firestore. Однак виникла проблема: після видалення гаманця він все ще залишався в транзакціях, де він був раніше вказаний. Для вирішення цієї проблеми я вирішив порівнювати кожну транзакцію, перевіряючи її властивість `walletId` з існуючими гаманцями після видалення. Якщо гаманця більше не існує, то я присвоюю значення `null`.

(Втім, процес виявився складнішим, ніж я описав вище, деталі наведу нижче в інших блоках.)

Оптимізація зберігання даних у Firestore
 - Під час роботи я помітив, що, можливо, не правильно організував зберігання даних у Firestore. Спочатку, коли я лише інтегрував Firestore в проєкт, мені здалося логічним зберігати дані не в колекціях, а в полях (Field). Я створив моделі даних і одразу додавав їх до бази при першій авторизації користувача. Все працювало нормально, масиви створювались, і я продовжував з ними працювати.

 - Однак, коли я хотів звернутися до колекцій і отримував порожні результати, я зрозумів, що щось не так. Виявилося, що масиви, які я вважав колекціями, такими не були. Тоді я спробував вручну створити тестову колекцію та перевірити її роботу — і все запрацювало. Це змусило мене задуматися про правильність зберігання даних.

Зміна підходу до зберігання даних у Firestore
  - Після цього випадку я проконсультувався з другом, який має більше досвіду з Firebase. Він розповів мені про обмеження Firestore, зокрема про максимальний розмір документа — 1 МБ, і ліміт у 20 000 полів на документ.

  - Ще я зрозумів, що якщо кожну транзакцію зберігати як окремий документ в колекції, це не створюватиме проблем, оскільки в попередньому підході один документ міг вирости до 1 МБ якщо транзакцій було б дуже багато в масиві. Та й загалом новий підхід виглядає більш структурованим.
  
Оновлення моделей даних
- Також  мені порадили змінити назви деяких властивостей для кращої зрозумілості. Раніше я зберігав у транзакціях лише назву гаманця у властивості `wallet`. Тепер я використовую властивість `walletId`, яка містить унікальний ідентифікатор гаманця з колекції `wallets`. Це дозволить уникнути можливих помилок у майбутньому, 




  