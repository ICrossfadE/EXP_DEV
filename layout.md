Всім привіт!  
Минулого тижня я працював над:  
- Зміною моделей даних які я отримую ті відправляю в Firestore
- Додатковим функціоналом видаленням гаманця 
- Зміною зберігання даних в Firestore
  
Додатковий функціонал видаленням гаманця
  Минулого разу я створив функцію яка видаляє гаманець з Firestore. Але я помітив що коли я видаляю гаманець він не видаляється з транзакції якщо він був вказаний попередньо в ній. Це потрібно було вирішити і я вирішив що потрібно робити порівняти кожну транзакцію і її властивість walletId з кожним існуючим гаманцем після видалення і якщо такого гаманця вже не існує то тоді встановлювати (null) 
  
  (Але не було все так просто як я описав вище інші деталі я розпишу в нижче в інших блоках.)

  Основна проблема яку я помітив в процесі роботи це те чи добре я зберігаю всі свої данні в Firestore. Ще на початку розробки як я тільки підключив до мого проекту я подумав що вірним рішенням зберігати дані просто (не в колеції) а у Field. І я скажу що не зовсім розумів де воно з'явиться, я написав моделі даних та просто та одразу створював їх в базі коли користовуч вперше авторизовувався в додатку. Я побачив що масиви створились, і так далі почав працювати з ними до цього часу і все працювало ніби добре. Я вже помічав колись що коли я звертаюсь до колекції а вона повртає НІЧОГО я ще подумав чому так? якщо в мене існують два масива. А я важав що це і є колекціями. І тут я спробував в самому Firestore створити тестову колекцію в ручну та якісь данні і отримати їх. І я їх отримав. І тут задумався чи вірно я зберігаю данні в Firestore.


Зміна зберігання даних в Firestore
  Після всієї історії з Firestore я запитався поради в свого друга який має набагато більше досвіду з Firebase. Я дізнався про лімити в Field що максимальний розмір документа — 1 МБ. і що в одному документі можна мати **до 20,000 полів**.

  Ще я дізнався що в колекціях теж є ліміт на документ — 1 МБ. Але якщо я розбю кожну транзакцію на окремі докумнти це не буде великою проблемою так як в минулому варіанті документ міг розрозтись до 1 МБ. Та і загалом все виглядає більш строктуровано

Змінна моделей даних

  Також мені дали пораду змінити назву деяких властивостей для кращого орієнтування. Тому що я встановлю walletId з колекції wallets до колекції Transactions до конкретної транзакції і там властивість теж називається аналогічно walletId. Але до цього я властивість була просто wallet і зберігав я там тільки назву гаманьця а не Id просто це було просто назва гаманьця і це в майбутньому могло призвести до неочікуваних багів.






  